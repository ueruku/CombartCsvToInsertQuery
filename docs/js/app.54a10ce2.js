(function(e){function t(t){for(var a,i,s=t[0],o=t[1],c=t[2],m=0,p=[];m<s.length;m++)i=s[m],n[i]&&p.push(n[i][0]),n[i]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);u&&u(t);while(p.length)p.shift()();return l.push.apply(l,c||[]),r()}function r(){for(var e,t=0;t<l.length;t++){for(var r=l[t],a=!0,s=1;s<r.length;s++){var o=r[s];0!==n[o]&&(a=!1)}a&&(l.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},n={app:0},l=[];function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=o;l.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"034f":function(e,t,r){"use strict";var a=r("64a9"),n=r.n(a);n.a},"64a9":function(e,t,r){},cd49:function(e,t,r){"use strict";r.r(t);var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{width:"80%",margin:"0px auto"},attrs:{id:"app"}},[r("div",{staticStyle:{"text-align":"left","font-size":"2em",color:"gray"}},[e._v("CSV→InsertQuery")]),r("div",{staticClass:"input"},[r("label",[e._v("DBの種類")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.dbType,expression:"dbType"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.dbType=t.target.multiple?r:r[0]}}},[r("option",[e._v("MySQL")]),r("option",[e._v("SQL Server")]),r("option",[e._v("Oracle")])]),r("label",[e._v("テキストの種類")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.textType,expression:"textType"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.textType=t.target.multiple?r:r[0]}}},[r("option",[e._v("CSV")]),r("option",[e._v("TSV")])]),r("hr"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.multipleTable,expression:"multipleTable"}],attrs:{type:"checkbox",id:"cb_multipleTable"},domProps:{checked:Array.isArray(e.multipleTable)?e._i(e.multipleTable,null)>-1:e.multipleTable},on:{change:function(t){var r=e.multipleTable,a=t.target,n=!!a.checked;if(Array.isArray(r)){var l=null,i=e._i(r,l);a.checked?i<0&&(e.multipleTable=r.concat([l])):i>-1&&(e.multipleTable=r.slice(0,i).concat(r.slice(i+1)))}else e.multipleTable=n}}}),r("label",{attrs:{for:"cb_multipleTable"}},[e._v("複数テーブルを空行で区切る")]),r("hr"),r("label",[e._v("テーブル名")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.tableName,expression:"tableName"}],attrs:{disabled:e.multipleTable||e.firstLineTableName},domProps:{value:e.tableName},on:{input:function(t){t.target.composing||(e.tableName=t.target.value)}}}),r("input",{directives:[{name:"model",rawName:"v-model",value:e.firstLineTableName,expression:"firstLineTableName"}],attrs:{type:"checkbox",id:"cb_firstLineTableName"},domProps:{checked:Array.isArray(e.firstLineTableName)?e._i(e.firstLineTableName,null)>-1:e.firstLineTableName},on:{change:function(t){var r=e.firstLineTableName,a=t.target,n=!!a.checked;if(Array.isArray(r)){var l=null,i=e._i(r,l);a.checked?i<0&&(e.firstLineTableName=r.concat([l])):i>-1&&(e.firstLineTableName=r.slice(0,i).concat(r.slice(i+1)))}else e.firstLineTableName=n}}}),r("label",{attrs:{for:"cb_firstLineTableName"}},[e._v("1行目をテーブル名とする")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.firstLineTableNameComment,expression:"firstLineTableNameComment"}],attrs:{type:"checkbox",id:"cb_firstLineTableNameComment",disabled:!e.firstLineTableName},domProps:{checked:Array.isArray(e.firstLineTableNameComment)?e._i(e.firstLineTableNameComment,null)>-1:e.firstLineTableNameComment},on:{change:function(t){var r=e.firstLineTableNameComment,a=t.target,n=!!a.checked;if(Array.isArray(r)){var l=null,i=e._i(r,l);a.checked?i<0&&(e.firstLineTableNameComment=r.concat([l])):i>-1&&(e.firstLineTableNameComment=r.slice(0,i).concat(r.slice(i+1)))}else e.firstLineTableNameComment=n}}}),r("label",{attrs:{for:"cb_firstLineTableNameComment"}},[e._v("隣をコメントとする")]),r("hr"),r("label",[e._v(e._s(e.textType))]),r("br"),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"text"}],staticStyle:{width:"80%",height:"10em"},attrs:{wrap:"off",spellcheck:"false"},domProps:{value:e.text},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:(t.preventDefault(),e.inputTab(t))},input:function(t){t.target.composing||(e.text=t.target.value)}}})]),r("label",[e._v("Query")]),r("br"),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.insertQuery,expression:"insertQuery"}],staticClass:"result",staticStyle:{width:"80%",height:"10em"},attrs:{wrap:"off",spellcheck:"false"},domProps:{value:e.insertQuery},on:{input:function(t){t.target.composing||(e.insertQuery=t.target.value)}}}),r("br"),e._m(0)])},l=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{width:"fit-content",margin:"0px auto","background-color":"#ccc"}},[e._v("\n    ※使い方\n    "),r("div",{staticStyle:{width:"fit-content","text-align":"left",margin:"0px auto"}},[e._v("\n      ・インサート先のDBの種類を選ぶ\n      "),r("br"),e._v("・テキストの種類を選ぶ\n      "),r("br"),e._v("・テーブル名を入力する\n      "),r("br"),e._v("・カラム+データが載ってるテキストを貼り付ける\n      "),r("br"),e._v("・Queryに出てくる\n    ")])])}];class i{static createInsertQuery(e,t,r){return e=this.encloseTableName(e),t=this.encloseColumnName(t),r=this.encloseData(r),r.length<=1||this.checkDbLink(e)?this.makeInsertQuery(e,t,r):this.makeMultipleInsertQuery(e,t,r)}static encloseTableName(e){if(this.checkDbLink(e))return e;const t=e.split(".");return 2===t.length?/^".*"$/.test(t[1])?e:t[0]+'."'+t[1]+'"':/^".*"$/.test(e)?e:'"'+e+'"'}static encloseColumnName(e){return e.map(e=>{return/^".*"$/.test(e)?e:'"'+e+'"'})}static encloseData(e){return e.map(e=>{return e.map(e=>{return["(NULL)​","« NULL »"].some(t=>e===t)?"NULL":/^'.*'$/.test(e)?e:"'"+e.replace(/'/g,"''")+"'"})})}static checkDbLink(e){return/@/.test(e)}static makeInsertQuery(e,t,r){return r.map(r=>"INSERT INTO "+e+" ("+t.join(",")+") VALUES ("+r.join(",")+");").join("\n")}static makeMultipleInsertQuery(e,t,r){let a="";return a+="INSERT ALL\n",a+=r.map(r=>"INTO "+e+" ("+t.join(",")+") VALUES ("+r.join(",")+")").join("\n"),a+="\nSELECT * FROM DUAL;",a}}class s{static createInsertQuery(e,t,r){return e=this.encloseTableName(e),t=this.encloseColumnName(t),r=this.encloseData(r),this.makeMultipleInsertQuery(e,t,r)}static encloseTableName(e){return e.split(".").map(e=>/^'.*'$/.test(e)?e:"'"+e+"'").join(".")}static encloseColumnName(e){return e.map(e=>{return/^'.*'$/.test(e)?e:"'"+e+"'"})}static encloseData(e){return e.map(e=>{return e.map(e=>{return["(NULL)​","« NULL »"].some(t=>e===t)?"NULL":/^'.*'$/.test(e)?e:"'"+e.replace(/'/g,"''")+"'"})})}static makeMultipleInsertQuery(e,t,r){return"INSERT INTO "+e+" ("+t.join(",")+")\nVALUES "+r.map(e=>"("+e.join(",")+")").join("\n    ,")+";"}}class o{static createInsertQuery(e,t,r){return e=this.encloseTableName(e),t=this.encloseColumnName(t),r=this.encloseData(r),this.makeMultipleInsertQuery(e,t,r)}static encloseTableName(e){return e.split(".").map(e=>/^\[.*\]$/.test(e)?e:"["+e+"]").join(".")}static encloseColumnName(e){return e.map(e=>/^\[.*\]$/.test(e)?e:"["+e+"]")}static encloseData(e){return e.map(e=>{return e.map(e=>{return["(NULL)​","« NULL »"].some(t=>e===t)?"NULL":/^'.*'$/.test(e)?e:"'"+e.replace(/'/g,"''")+"'"})})}static makeMultipleInsertQuery(e,t,r){return"INSERT INTO "+e+" ("+t.join(",")+")\nVALUES "+r.map(e=>"("+e.join(",")+")").join("\n    ,")+";"}}var c=a["a"].extend({name:"app",data(){return{dbType:"MySQL",textType:"TSV",tableName:"",multipleTable:!1,firstLineTableName:!0,firstLineTableNameComment:!0,text:""}},computed:{insertQuery(){let e="TSV"===this.textType?this.combartTsvToTable(this.text):"CSV"===this.textType?this.combartCsvToTable(this.text):[];return this.multipleTable?this.SliceMultipleTable(e).map(e=>this.combartTableToInsertQuery(e)).join("\n\n"):this.combartTableToInsertQuery(e)}},methods:{SliceMultipleTable(e){let t=e.findIndex(e=>0===e.length||e.every(e=>""===e)),r=[];while(-1<t)0<t&&r.push(e.slice(0,t)),e=e.slice(t+1),t=e.findIndex(e=>0===e.length||e.every(e=>""===e));return r.push(e.slice(0,e.length)),r},combartTableToInsertQuery(e){if(e=this.deleteBlankRowFromTable(e),0===e.length)return"";e=this.deleteTrailingBlankFromTable(e);let t=this.tableName,r="";if(this.firstLineTableName){const a=e[0].filter(e=>""!==e);t=a[0],this.firstLineTableNameComment&&1<a.length&&(r="-- "+a[1]),e=e.slice(1)}const a=e[0].length;e=e.map(e=>this.resizeArray(e,a,""));const n=e[0];e=e.slice(1);const l=e;e=[];let c="";return c+=""!==r?r+"\n":"",c+="MySQL"===this.dbType?s.createInsertQuery(t,n,l):"SQL Server"===this.dbType?o.createInsertQuery(t,n,l):"Oracle"===this.dbType?i.createInsertQuery(t,n,l):"",c},deleteBlankRowFromTable(e){return e.filter(e=>e.some(e=>""!==e))},deleteTrailingBlankFromTable(e){return e.map(e=>{const t=e.length-e.slice().reverse().findIndex(e=>""!==e);return e.length<t?[]:e.slice(0,t)})},combartCsvToTable(e){let t=[],r=[],a="",n=!1;const l=e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]|[\s\S]/g)||[];for(let i=0;i<l.length;++i){let e=l[i];if(n)if('"'===e){let e=l[i+1];'"'===e?(a+='"',++i):n=!1}else a+=e;else'"'===e?n=!0:","===e?(r.push(a),a=""):"\n"===e?(r.push(a),a="",t.push(r),r=[]):a+=e}return""!==a&&(r.push(a),a="",t.push(r),r=[]),t},combartTsvToTable(e){return e.split("\n").map(e=>e.split("\t"))},resizeArray(e,t,r){const a=t-e.length;return 0===a?e:a<0?e.slice(0,t):e.concat(Array(a).fill(r))},inputTab(e){let t=e.target;const r=t.selectionStart;t.value=t.value.substr(0,r)+"\t"+t.value.substr(r,t.value.length),t.selectionEnd=r+1}}}),u=c,m=(r("034f"),r("2877")),p=Object(m["a"])(u,n,l,!1,null,null,null),b=p.exports;a["a"].config.productionTip=!1,new a["a"]({render:e=>e(b)}).$mount("#app")}});
//# sourceMappingURL=app.54a10ce2.js.map